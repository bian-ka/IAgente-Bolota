version: '3.8'

services:
 n8n:
  image: docker.n8n.io/n8nio/n8n:latest
  restart: always
  ports:
   - '5678:5678'
  environment:
   - N8N_BASIC_AUTH_ACTIVE=true
   - N8N_BASIC_AUTH_USER=${N8N_BASIC_AUTH_USER}
   - N8N_BASIC_AUTH_PASSWORD=${N8N_BASIC_AUTH_PASSWORD}
   - N8N_HOST=localhost
   - N8N_PORT=5678
   - N8N_PROTOCOL=http
   - NODE_ENV=production
   - WEBHOOK_URL=http://localhost:5678/
   - N8N_ENCRYPTION_KEY=your-encryption-key-here
  volumes:
   - n8n_data:/home/node/.n8n
  networks:
   - bolota-network

 mongodb:
  image: mongo:6.0
  restart: always
  ports:
   - '27017:27017'
  environment:
   - MONGO_INITDB_ROOT_USERNAME=${MONGO_INITDB_ROOT_USERNAME}
   - MONGO_INITDB_ROOT_PASSWORD=${MONGO_INITDB_ROOT_PASSWORD}
   - MONGO_INITDB_DATABASE=${MONGO_INITDB_DATABASE}
  volumes:
   - mongodb_data:/data/db
  networks:
   - bolota-network

volumes:
 n8n_data:
 mongodb_data:

networks:
 bolota-network:
  driver: bridge
